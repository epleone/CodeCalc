:root {
    --matrix-color: #660985;
    --matrix-background: rgba(238, 238, 238, 0.95);
}

:root[data-theme="dark"] {
    --matrix-color: #999999;
    --matrix-background: #2d2d2d;
}

/* LaTeX矩阵样式 */
.latex-matrix {
    display: inline-block;
    position: relative;
    font-family: "Times New Roman", serif;
    font-size: 1.2em;
    margin: 20px 0;
    padding: 0 2px;  /* 减小整体左右padding */
}

/* 使用伪元素添加圆括号 */
.latex-matrix::before,
.latex-matrix::after {
    content: '';
    position: absolute;
    top: 4px;     /* 进一步缩短上边距 */
    bottom: 4px;  /* 进一步缩短下边距 */
    width: 6px;
    border-style: solid;
    border-color: var(--matrix-color);
    border-radius: 8px;
}

.latex-matrix::before {
    left: 0;
    border-width: 1px 0 1px 1px;
    border-radius: 8px 0 0 8px;
}

.latex-matrix::after {
    right: 0;
    border-width: 1px 1px 1px 0;
    border-radius: 0 8px 8px 0;
}

/* 调整内容区域的间距 */
.latex-matrix .matrix-content {
    padding: 0.02em 0.3em;  /* 稍微减小上下padding */
}

.latex-matrix .matrix-row {
    display: flex;
    justify-content: flex-start;  /* 改为flex-start使元素从左开始排列 */
    margin: 0;
    line-height: 1.1;
}

.matrix-element-container {
    padding: 2px;
    text-align: left;
    min-width: unset;
    margin: 0 2px;
    width: 24px;  /* 添加固定宽度确保列对齐 */
}

.matrix-element {
    display: inline-block;
    padding: 0 2px;
    min-width: 16px;
    text-align: left;
    color: var(--matrix-color);
    font-weight: 500;
    font-size: 1.2em;
    width: 100%;  /* 让元素填充容器宽度 */
}

/* 添加省略号样式 */
.matrix-element.dots {
    font-weight: bold;
    letter-spacing: 2px;
}

.matrix-display {
    font-family: monospace;
    white-space: pre;
} 



/* 确保结果容器可以正确显示预览框 */
.result-container {
    position: relative;  /* 为预览框提供定位参考 */
}

/* 在消息图标中显示的矩阵样式调整 */
.message-icon.matrix {
    background: transparent;
    padding: 8px 4px;
}

.message-icon .latex-matrix {
    position: absolute;
    right: 100%;
    top: 50%;
    transform: translateY(-50%);
    margin: 0 -20px;
    font-size: 1em;
    background: var(--matrix-background);
    padding: 12px 16px;
    border-radius: 4px;
    z-index: 9999;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* 调整消息图标中的圆括号位置 */
.message-icon .latex-matrix::before {
    left: 10px;  /* 稍微调整左括号位置 */
}

.message-icon .latex-matrix::after {
    right: 8px;  /* 相应调整右括号位置 */
}

/* 调整第一个和最后一个元素的边距 */
.matrix-row > :first-child {
    margin-left: 1px;  /* 减小左边距 */
}

.matrix-row > :last-child {
    margin-right: 1px;  /* 减小右边距 */
}

/* 第一行的提示框样式 */
.message-icon.first-row .latex-matrix {
    top: -10px;  /* 将提示框移到图标下方 */
    transform: none;  /* 移除垂直居中transform */
}
