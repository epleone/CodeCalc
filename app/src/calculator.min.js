/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */
var e,n,t=9e15,r=1e9,i="0123456789abcdef",s="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",o="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",a={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:t,crypto:!1},c=!0,u="[DecimalError] ",f=u+"Invalid argument: ",p=u+"Precision limit exceeded",d=u+"crypto unavailable",l="[object Decimal]",g=Math.floor,h=Math.pow,m=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,y=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,v=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=1e7,b=s.length-1,S=o.length-1,N={toStringTag:l};function E(e){var n,t,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,n=1;n<i;n++)(t=7-(r=e[n]+"").length)&&(s+=H(t)),s+=r;(t=7-(r=(o=e[n])+"").length)&&(s+=H(t))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function $(e,n,t){if(e!==~~e||e<n||e>t)throw Error(f+e)}function M(e,n,t,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--n;return--n<0?(n+=7,i=0):(i=Math.ceil((n+1)/7),n%=7),s=h(10,7-n),a=e[i]%s|0,null==r?n<3?(0==n?a=a/100|0:1==n&&(a=a/10|0),o=t<4&&99999==a||t>3&&49999==a||5e4==a||0==a):o=(t<4&&a+1==s||t>3&&a+1==s/2)&&(e[i+1]/s/100|0)==h(10,n-2)-1||(a==s/2||0==a)&&!(e[i+1]/s/100|0):n<4?(0==n?a=a/1e3|0:1==n?a=a/100|0:2==n&&(a=a/10|0),o=(r||t<4)&&9999==a||!r&&t>3&&4999==a):o=((r||t<4)&&a+1==s||!r&&t>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==h(10,n-3)-1,o}function T(e,n,t){for(var r,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;)o[s]*=n;for(o[0]+=i.indexOf(e.charAt(a++)),r=0;r<o.length;r++)o[r]>t-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/t|0,o[r]%=t)}return o.reverse()}N.absoluteValue=N.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),k(e)},N.ceil=function(){return k(new this.constructor(this),this.e+1,2)},N.clampedTo=N.clamp=function(e,n){var t=this,r=t.constructor;if(e=new r(e),n=new r(n),!e.s||!n.s)return new r(NaN);if(e.gt(n))throw Error(f+n);return t.cmp(e)<0?e:t.cmp(n)>0?n:new r(t)},N.comparedTo=N.cmp=function(e){var n,t,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,c=s.s,u=e.s;if(!o||!a)return c&&u?c!==u?c:o===a?0:!o^c<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?c:a[0]?-u:0;if(c!==u)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(n=0,t=(r=o.length)<(i=a.length)?r:i;n<t;++n)if(o[n]!==a[n])return o[n]>a[n]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1},N.cosine=N.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+7,i.rounding=1,r=function(e,n){var t,r,i;if(n.isZero())return n;r=n.d.length,r<32?i=(1/B(4,t=Math.ceil(r/3))).toString():(t=16,i="2.3283064365386962890625e-10");e.precision+=t,n=L(e,1,n.times(i),new e(1));for(var s=t;s--;){var o=n.times(n);n=o.times(o).minus(o).times(8).plus(1)}return e.precision-=t,n}(i,W(i,r)),i.precision=e,i.rounding=t,k(2==n||3==n?r.neg():r,e,t,!0)):new i(1):new i(NaN)},N.cubeRoot=N.cbrt=function(){var e,n,t,r,i,s,o,a,u,f,p=this,d=p.constructor;if(!p.isFinite()||p.isZero())return new d(p);for(c=!1,(s=p.s*h(p.s*p,1/3))&&Math.abs(s)!=1/0?r=new d(s.toString()):(t=E(p.d),(s=((e=p.e)-t.length+1)%3)&&(t+=1==s||-2==s?"0":"00"),s=h(t,1/3),e=g((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(t=s==1/0?"5e"+e:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+e)).s=p.s),o=(e=d.precision)+3;;)if(f=(u=(a=r).times(a).times(a)).plus(p),r=D(f.plus(p).times(a),f.plus(u),o+2,1),E(a.d).slice(0,o)===(t=E(r.d)).slice(0,o)){if("9999"!=(t=t.slice(o-3,o+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(k(r,e+1,1),n=!r.times(r).times(r).eq(p));break}if(!i&&(k(a,e+1,0),a.times(a).times(a).eq(p))){r=a;break}o+=4,i=1}return c=!0,k(r,e,d.rounding,n)},N.decimalPlaces=N.dp=function(){var e,n=this.d,t=NaN;if(n){if(t=7*((e=n.length-1)-g(this.e/7)),e=n[e])for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t},N.dividedBy=N.div=function(e){return D(this,new this.constructor(e))},N.dividedToIntegerBy=N.divToInt=function(e){var n=this.constructor;return k(D(this,new n(e),0,1,1),n.precision,n.rounding)},N.equals=N.eq=function(e){return 0===this.cmp(e)},N.floor=function(){return k(new this.constructor(this),this.e+1,3)},N.greaterThan=N.gt=function(e){return this.cmp(e)>0},N.greaterThanOrEqualTo=N.gte=function(e){var n=this.cmp(e);return 1==n||0===n},N.hyperbolicCosine=N.cosh=function(){var e,n,t,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;t=o.precision,r=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?n=(1/B(4,e=Math.ceil(i/3))).toString():(e=16,n="2.3283064365386962890625e-10"),s=L(o,1,s.times(n),new o(1),!0);for(var c,u=e,f=new o(8);u--;)c=s.times(s),s=a.minus(c.times(f.minus(c.times(f))));return k(s,o.precision=t,o.rounding=r,!0)},N.hyperbolicSine=N.sinh=function(){var e,n,t,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(n=s.precision,t=s.rounding,s.precision=n+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=L(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=L(s,2,i=i.times(1/B(5,e)),i,!0);for(var o,a=new s(5),c=new s(16),u=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(c.times(o).plus(u))))}return s.precision=n,s.rounding=t,k(i,n,t,!0)},N.hyperbolicTangent=N.tanh=function(){var e,n,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.precision,n=r.rounding,r.precision=e+7,r.rounding=1,D(t.sinh(),t.cosh(),r.precision=e,r.rounding=n)):new r(t.s)},N.inverseCosine=N.acos=function(){var e,n=this,t=n.constructor,r=n.abs().cmp(1),i=t.precision,s=t.rounding;return-1!==r?0===r?n.isNeg()?P(t,i,s):new t(0):new t(NaN):n.isZero()?P(t,i+4,s).times(.5):(t.precision=i+6,t.rounding=1,n=n.asin(),e=P(t,i+4,s).times(.5),t.precision=i,t.rounding=s,e.minus(n))},N.inverseHyperbolicCosine=N.acosh=function(){var e,n,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(e=r.precision,n=r.rounding,r.precision=e+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,c=!1,t=t.times(t).minus(1).sqrt().plus(t),c=!0,r.precision=e,r.rounding=n,t.ln()):new r(t)},N.inverseHyperbolicSine=N.asinh=function(){var e,n,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(e=r.precision,n=r.rounding,r.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,c=!1,t=t.times(t).plus(1).sqrt().plus(t),c=!0,r.precision=e,r.rounding=n,t.ln())},N.inverseHyperbolicTangent=N.atanh=function(){var e,n,t,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,n=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?k(new s(i),e,n,!0):(s.precision=t=r-i.e,i=D(i.plus(1),new s(1).minus(i),t+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=n,i.times(.5))):new s(NaN)},N.inverseSine=N.asin=function(){var e,n,t,r,i=this,s=i.constructor;return i.isZero()?new s(i):(n=i.abs().cmp(1),t=s.precision,r=s.rounding,-1!==n?0===n?((e=P(s,t+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=r,i.times(2)))},N.inverseTangent=N.atan=function(){var e,n,t,r,i,s,o,a,u,f=this,p=f.constructor,d=p.precision,l=p.rounding;if(f.isFinite()){if(f.isZero())return new p(f);if(f.abs().eq(1)&&d+4<=S)return(o=P(p,d+4,l).times(.25)).s=f.s,o}else{if(!f.s)return new p(NaN);if(d+4<=S)return(o=P(p,d+4,l).times(.5)).s=f.s,o}for(p.precision=a=d+10,p.rounding=1,e=t=Math.min(28,a/7+2|0);e;--e)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(c=!1,n=Math.ceil(a/7),r=1,u=f.times(f),o=new p(f),i=f;-1!==e;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),void 0!==(o=s.plus(i.div(r+=2))).d[n])for(e=n;o.d[e]===s.d[e]&&e--;);return t&&(o=o.times(2<<t-1)),c=!0,k(o,p.precision=d,p.rounding=l,!0)},N.isFinite=function(){return!!this.d},N.isInteger=N.isInt=function(){return!!this.d&&g(this.e/7)>this.d.length-2},N.isNaN=function(){return!this.s},N.isNegative=N.isNeg=function(){return this.s<0},N.isPositive=N.isPos=function(){return this.s>0},N.isZero=function(){return!!this.d&&0===this.d[0]},N.lessThan=N.lt=function(e){return this.cmp(e)<0},N.lessThanOrEqualTo=N.lte=function(e){return this.cmp(e)<1},N.logarithm=N.log=function(e){var n,t,r,i,s,o,a,u,f=this,p=f.constructor,d=p.precision,l=p.rounding;if(null==e)e=new p(10),n=!0;else{if(t=(e=new p(e)).d,e.s<0||!t||!t[0]||e.eq(1))return new p(NaN);n=e.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new p(t&&!t[0]?-1/0:1!=f.s?NaN:t?0:1/0);if(n)if(t.length>1)s=!0;else{for(i=t[0];i%10==0;)i/=10;s=1!==i}if(c=!1,o=j(f,a=d+5),r=n?F(p,a+10):j(e,a),M((u=D(o,r,a,1)).d,i=d,l))do{if(o=j(f,a+=10),r=n?F(p,a+10):j(e,a),u=D(o,r,a,1),!s){+E(u.d).slice(i+1,i+15)+1==1e14&&(u=k(u,d+1,0));break}}while(M(u.d,i+=10,l));return c=!0,k(u,d,l)},N.minus=N.sub=function(e){var n,t,r,i,s,o,a,u,f,p,d,l,h=this,m=h.constructor;if(e=new m(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new m(e.d||h.s!==e.s?h:NaN):e=new m(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(f=h.d,l=e.d,a=m.precision,u=m.rounding,!f[0]||!l[0]){if(l[0])e.s=-e.s;else{if(!f[0])return new m(3===u?-0:0);e=new m(h)}return c?k(e,a,u):e}if(t=g(e.e/7),p=g(h.e/7),f=f.slice(),s=p-t){for((d=s<0)?(n=f,s=-s,o=l.length):(n=l,t=p,o=f.length),s>(r=Math.max(Math.ceil(a/7),o)+2)&&(s=r,n.length=1),n.reverse(),r=s;r--;)n.push(0);n.reverse()}else{for((d=(r=f.length)<(o=l.length))&&(o=r),r=0;r<o;r++)if(f[r]!=l[r]){d=f[r]<l[r];break}s=0}for(d&&(n=f,f=l,l=n,e.s=-e.s),o=f.length,r=l.length-o;r>0;--r)f[o++]=0;for(r=l.length;r>s;){if(f[--r]<l[r]){for(i=r;i&&0===f[--i];)f[i]=x-1;--f[i],f[r]+=x}f[r]-=l[r]}for(;0===f[--o];)f.pop();for(;0===f[0];f.shift())--t;return f[0]?(e.d=f,e.e=O(f,t),c?k(e,a,u):e):new m(3===u?-0:0)},N.modulo=N.mod=function(e){var n,t=this,r=t.constructor;return e=new r(e),!t.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||t.d&&!t.d[0]?k(new r(t),r.precision,r.rounding):(c=!1,9==r.modulo?(n=D(t,e.abs(),0,3,1)).s*=e.s:n=D(t,e,0,r.modulo,1),n=n.times(e),c=!0,t.minus(n))},N.naturalExponential=N.exp=function(){return R(this)},N.naturalLogarithm=N.ln=function(){return j(this)},N.negated=N.neg=function(){var e=new this.constructor(this);return e.s=-e.s,k(e)},N.plus=N.add=function(e){var n,t,r,i,s,o,a,u,f,p,d=this,l=d.constructor;if(e=new l(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new l(e.d||d.s===e.s?d:NaN)):e=new l(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(f=d.d,p=e.d,a=l.precision,u=l.rounding,!f[0]||!p[0])return p[0]||(e=new l(d)),c?k(e,a,u):e;if(s=g(d.e/7),r=g(e.e/7),f=f.slice(),i=s-r){for(i<0?(t=f,i=-i,o=p.length):(t=p,r=s,o=f.length),i>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for((o=f.length)-(i=p.length)<0&&(i=o,t=p,p=f,f=t),n=0;i;)n=(f[--i]=f[i]+p[i]+n)/x|0,f[i]%=x;for(n&&(f.unshift(n),++r),o=f.length;0==f[--o];)f.pop();return e.d=f,e.e=O(f,r),c?k(e,a,u):e},N.precision=N.sd=function(e){var n,t=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(f+e);return t.d?(n=A(t.d),e&&t.e+1>n&&(n=t.e+1)):n=NaN,n},N.round=function(){var e=this,n=e.constructor;return k(new n(e),e.e+1,n.rounding)},N.sine=N.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+7,i.rounding=1,r=function(e,n){var t,r=n.d.length;if(r<3)return n.isZero()?n:L(e,2,n,n);t=(t=1.4*Math.sqrt(r))>16?16:0|t,n=n.times(1/B(5,t)),n=L(e,2,n,n);for(var i,s=new e(5),o=new e(16),a=new e(20);t--;)i=n.times(n),n=n.times(s.plus(i.times(o.times(i).minus(a))));return n}(i,W(i,r)),i.precision=e,i.rounding=t,k(n>2?r.neg():r,e,t,!0)):new i(NaN)},N.squareRoot=N.sqrt=function(){var e,n,t,r,i,s,o=this,a=o.d,u=o.e,f=o.s,p=o.constructor;if(1!==f||!a||!a[0])return new p(!f||f<0&&(!a||a[0])?NaN:a?o:1/0);for(c=!1,0==(f=Math.sqrt(+o))||f==1/0?(((n=E(a)).length+u)%2==0&&(n+="0"),f=Math.sqrt(n),u=g((u+1)/2)-(u<0||u%2),r=new p(n=f==1/0?"5e"+u:(n=f.toExponential()).slice(0,n.indexOf("e")+1)+u)):r=new p(f.toString()),t=(u=p.precision)+3;;)if(r=(s=r).plus(D(o,s,t+2,1)).times(.5),E(s.d).slice(0,t)===(n=E(r.d)).slice(0,t)){if("9999"!=(n=n.slice(t-3,t+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(k(r,u+1,1),e=!r.times(r).eq(o));break}if(!i&&(k(s,u+1,0),s.times(s).eq(o))){r=s;break}t+=4,i=1}return c=!0,k(r,u,p.rounding,e)},N.tangent=N.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,(r=r.sin()).s=1,r=D(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,k(2==n||4==n?r.neg():r,e,t,!0)):new i(NaN)},N.times=N.mul=function(e){var n,t,r,i,s,o,a,u,f,p=this,d=p.constructor,l=p.d,h=(e=new d(e)).d;if(e.s*=p.s,!(l&&l[0]&&h&&h[0]))return new d(!e.s||l&&!l[0]&&!h||h&&!h[0]&&!l?NaN:l&&h?0*e.s:e.s/0);for(t=g(p.e/7)+g(e.e/7),(u=l.length)<(f=h.length)&&(s=l,l=h,h=s,o=u,u=f,f=o),s=[],r=o=u+f;r--;)s.push(0);for(r=f;--r>=0;){for(n=0,i=u+r;i>r;)a=s[i]+h[r]*l[i-r-1]+n,s[i--]=a%x|0,n=a/x|0;s[i]=(s[i]+n)%x|0}for(;!s[--o];)s.pop();return n?++t:s.shift(),e.d=s,e.e=O(s,t),c?k(e,d.precision,d.rounding):e},N.toBinary=function(e,n){return V(this,2,e,n)},N.toDecimalPlaces=N.toDP=function(e,n){var t=this,i=t.constructor;return t=new i(t),void 0===e?t:($(e,0,r),void 0===n?n=i.rounding:$(n,0,8),k(t,e+t.e+1,n))},N.toExponential=function(e,n){var t,i=this,s=i.constructor;return void 0===e?t=Y(i,!0):($(e,0,r),void 0===n?n=s.rounding:$(n,0,8),t=Y(i=k(new s(i),e+1,n),!0,e+1)),i.isNeg()&&!i.isZero()?"-"+t:t},N.toFixed=function(e,n){var t,i,s=this,o=s.constructor;return void 0===e?t=Y(s):($(e,0,r),void 0===n?n=o.rounding:$(n,0,8),t=Y(i=k(new o(s),e+s.e+1,n),!1,e+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t},N.toFraction=function(e){var n,t,r,i,s,o,a,u,p,d,l,g,m=this,w=m.d,y=m.constructor;if(!w)return new y(m);if(p=t=new y(1),r=u=new y(0),o=(s=(n=new y(r)).e=A(w)-m.e-1)%7,n.d[0]=h(10,o<0?7+o:o),null==e)e=s>0?n:p;else{if(!(a=new y(e)).isInt()||a.lt(p))throw Error(f+a);e=a.gt(n)?s>0?n:p:a}for(c=!1,a=new y(E(w)),d=y.precision,y.precision=s=7*w.length*2;l=D(a,n,0,1,1),1!=(i=t.plus(l.times(r))).cmp(e);)t=r,r=i,i=p,p=u.plus(l.times(i)),u=i,i=n,n=a.minus(l.times(i)),a=i;return i=D(e.minus(t),r,0,1,1),u=u.plus(i.times(p)),t=t.plus(i.times(r)),u.s=p.s=m.s,g=D(p,r,s,1).minus(m).abs().cmp(D(u,t,s,1).minus(m).abs())<1?[p,r]:[u,t],y.precision=d,c=!0,g},N.toHexadecimal=N.toHex=function(e,n){return V(this,16,e,n)},N.toNearest=function(e,n){var t=this,r=t.constructor;if(t=new r(t),null==e){if(!t.d)return t;e=new r(1),n=r.rounding}else{if(e=new r(e),void 0===n?n=r.rounding:$(n,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(c=!1,t=D(t,e,0,n,1).times(e),c=!0,k(t)):(e.s=t.s,t=e),t},N.toNumber=function(){return+this},N.toOctal=function(e,n){return V(this,8,e,n)},N.toPower=N.pow=function(e){var n,t,r,i,s,o,a=this,u=a.constructor,f=+(e=new u(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new u(h(+a,f));if((a=new u(a)).eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return k(a,r,s);if((n=g(e.e/7))>=e.d.length-1&&(t=f<0?-f:f)<=9007199254740991)return i=C(u,a,t,r),e.s<0?new u(1).div(i):k(i,r,s);if((o=a.s)<0){if(n<e.d.length-1)return new u(NaN);if(1&e.d[n]||(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(n=0!=(t=h(+a,f))&&isFinite(t)?new u(t+"").e:g(f*(Math.log("0."+E(a.d))/Math.LN10+a.e+1)))>u.maxE+1||n<u.minE-1?new u(n>0?o/0:0):(c=!1,u.rounding=a.s=1,t=Math.min(12,(n+"").length),(i=R(e.times(j(a,r+t)),r)).d&&M((i=k(i,r+5,1)).d,r,s)&&(n=r+10,+E((i=k(R(e.times(j(a,n+t)),n),n+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=k(i,r+1,0))),i.s=o,c=!0,u.rounding=s,k(i,r,s))},N.toPrecision=function(e,n){var t,i=this,s=i.constructor;return void 0===e?t=Y(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):($(e,1,r),void 0===n?n=s.rounding:$(n,0,8),t=Y(i=k(new s(i),e,n),e<=i.e||i.e<=s.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+t:t},N.toSignificantDigits=N.toSD=function(e,n){var t=this.constructor;return void 0===e?(e=t.precision,n=t.rounding):($(e,1,r),void 0===n?n=t.rounding:$(n,0,8)),k(new t(this),e,n)},N.toString=function(){var e=this,n=e.constructor,t=Y(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t},N.truncated=N.trunc=function(){return k(new this.constructor(this),this.e+1,1)},N.valueOf=N.toJSON=function(){var e=this,n=e.constructor,t=Y(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()?"-"+t:t};var D=function(){function n(e,n,t){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*n+i,e[s]=r%t|0,i=r/t|0;return i&&e.unshift(i),e}function t(e,n,t,r){var i,s;if(t!=r)s=t>r?1:-1;else for(i=s=0;i<t;i++)if(e[i]!=n[i]){s=e[i]>n[i]?1:-1;break}return s}function r(e,n,t,r){for(var i=0;t--;)e[t]-=i,i=e[t]<n[t]?1:0,e[t]=i*r+e[t]-n[t];for(;!e[0]&&e.length>1;)e.shift()}return function(i,s,o,a,c,u){var f,p,d,l,h,m,w,y,v,b,S,N,E,$,M,T,D,Y,O,F,P=i.constructor,A=i.s==s.s?1:-1,H=i.d,C=s.d;if(!(H&&H[0]&&C&&C[0]))return new P(i.s&&s.s&&(H?!C||H[0]!=C[0]:C)?H&&0==H[0]||!C?0*A:A/0:NaN);for(u?(h=1,p=i.e-s.e):(u=x,h=7,p=g(i.e/h)-g(s.e/h)),O=C.length,D=H.length,b=(v=new P(A)).d=[],d=0;C[d]==(H[d]||0);d++);if(C[d]>(H[d]||0)&&p--,null==o?($=o=P.precision,a=P.rounding):$=c?o+(i.e-s.e)+1:o,$<0)b.push(1),m=!0;else{if($=$/h+2|0,d=0,1==O){for(l=0,C=C[0],$++;(d<D||l)&&$--;d++)M=l*u+(H[d]||0),b[d]=M/C|0,l=M%C|0;m=l||d<D}else{for((l=u/(C[0]+1)|0)>1&&(C=n(C,l,u),H=n(H,l,u),O=C.length,D=H.length),T=O,N=(S=H.slice(0,O)).length;N<O;)S[N++]=0;(F=C.slice()).unshift(0),Y=C[0],C[1]>=u/2&&++Y;do{l=0,(f=t(C,S,O,N))<0?(E=S[0],O!=N&&(E=E*u+(S[1]||0)),(l=E/Y|0)>1?(l>=u&&(l=u-1),1==(f=t(w=n(C,l,u),S,y=w.length,N=S.length))&&(l--,r(w,O<y?F:C,y,u))):(0==l&&(f=l=1),w=C.slice()),(y=w.length)<N&&w.unshift(0),r(S,w,N,u),-1==f&&(f=t(C,S,O,N=S.length))<1&&(l++,r(S,O<N?F:C,N,u)),N=S.length):0===f&&(l++,S=[0]),b[d++]=l,f&&S[0]?S[N++]=H[T]||0:(S=[H[T]],N=1)}while((T++<D||void 0!==S[0])&&$--);m=void 0!==S[0]}b[0]||b.shift()}if(1==h)v.e=p,e=m;else{for(d=1,l=b[0];l>=10;l/=10)d++;v.e=d+p*h-1,k(v,c?o+v.e+1:o,a,m)}return v}}();function k(e,n,t,r){var i,s,o,a,u,f,p,d,l,g=e.constructor;e:if(null!=n){if(!(d=e.d))return e;for(i=1,a=d[0];a>=10;a/=10)i++;if((s=n-i)<0)s+=7,o=n,u=(p=d[l=0])/h(10,i-o-1)%10|0;else if((l=Math.ceil((s+1)/7))>=(a=d.length)){if(!r)break e;for(;a++<=l;)d.push(0);p=u=0,i=1,o=(s%=7)-7+1}else{for(p=a=d[l],i=1;a>=10;a/=10)i++;u=(o=(s%=7)-7+i)<0?0:p/h(10,i-o-1)%10|0}if(r=r||n<0||void 0!==d[l+1]||(o<0?p:p%h(10,i-o-1)),f=t<4?(u||r)&&(0==t||t==(e.s<0?3:2)):u>5||5==u&&(4==t||r||6==t&&(s>0?o>0?p/h(10,i-o):0:d[l-1])%10&1||t==(e.s<0?8:7)),n<1||!d[0])return d.length=0,f?(n-=e.e+1,d[0]=h(10,(7-n%7)%7),e.e=-n||0):d[0]=e.e=0,e;if(0==s?(d.length=l,a=1,l--):(d.length=l+1,a=h(10,7-s),d[l]=o>0?(p/h(10,i-o)%h(10,o)|0)*a:0),f)for(;;){if(0==l){for(s=1,o=d[0];o>=10;o/=10)s++;for(o=d[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,d[0]==x&&(d[0]=1));break}if(d[l]+=a,d[l]!=x)break;d[l--]=0,a=1}for(s=d.length;0===d[--s];)d.pop()}return c&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function Y(e,n,t){if(!e.isFinite())return Z(e);var r,i=e.e,s=E(e.d),o=s.length;return n?(t&&(r=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+H(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+H(-i-1)+s,t&&(r=t-o)>0&&(s+=H(r))):i>=o?(s+=H(i+1-o),t&&(r=t-i-1)>0&&(s=s+"."+H(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(s+="."),s+=H(r))),s}function O(e,n){var t=e[0];for(n*=7;t>=10;t/=10)n++;return n}function F(e,n,t){if(n>b)throw c=!0,t&&(e.precision=t),Error(p);return k(new e(s),n,1,!0)}function P(e,n,t){if(n>S)throw Error(p);return k(new e(o),n,t,!0)}function A(e){var n=e.length-1,t=7*n+1;if(n=e[n]){for(;n%10==0;n/=10)t--;for(n=e[0];n>=10;n/=10)t++}return t}function H(e){for(var n="";e--;)n+="0";return n}function C(e,n,t,r){var i,s=new e(1),o=Math.ceil(r/7+4);for(c=!1;;){if(t%2&&K((s=s.times(n)).d,o)&&(i=!0),0===(t=g(t/2))){t=s.d.length-1,i&&0===s.d[t]&&++s.d[t];break}K((n=n.times(n)).d,o)}return c=!0,s}function q(e){return 1&e.d[e.d.length-1]}function _(e,n,t){for(var r,i=new e(n[0]),s=0;++s<n.length;){if(!(r=new e(n[s])).s){i=r;break}i[t](r)&&(i=r)}return i}function R(e,n){var t,r,i,s,o,a,u,f=0,p=0,d=0,l=e.constructor,g=l.rounding,m=l.precision;if(!e.d||!e.d[0]||e.e>17)return new l(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==n?(c=!1,u=m):u=n,a=new l(.03125);e.e>-2;)e=e.times(a),d+=5;for(u+=r=Math.log(h(2,d))/Math.LN10*2+5|0,t=s=o=new l(1),l.precision=u;;){if(s=k(s.times(e),u,1),t=t.times(++p),E((a=o.plus(D(s,t,u,1))).d).slice(0,u)===E(o.d).slice(0,u)){for(i=d;i--;)o=k(o.times(o),u,1);if(null!=n)return l.precision=m,o;if(!(f<3&&M(o.d,u-r,g,f)))return k(o,l.precision=m,g,c=!0);l.precision=u+=10,t=s=a=new l(1),p=0,f++}o=a}}function j(e,n){var t,r,i,s,o,a,u,f,p,d,l,g=1,h=e,m=h.d,w=h.constructor,y=w.rounding,v=w.precision;if(h.s<0||!m||!m[0]||!h.e&&1==m[0]&&1==m.length)return new w(m&&!m[0]?-1/0:1!=h.s?NaN:m?0:h);if(null==n?(c=!1,p=v):p=n,w.precision=p+=10,r=(t=E(m)).charAt(0),!(Math.abs(s=h.e)<15e14))return f=F(w,p+2,v).times(s+""),h=j(new w(r+"."+t.slice(1)),p-10).plus(f),w.precision=v,null==n?k(h,v,y,c=!0):h;for(;r<7&&1!=r||1==r&&t.charAt(1)>3;)r=(t=E((h=h.times(e)).d)).charAt(0),g++;for(s=h.e,r>1?(h=new w("0."+t),s++):h=new w(r+"."+t.slice(1)),d=h,u=o=h=D(h.minus(1),h.plus(1),p,1),l=k(h.times(h),p,1),i=3;;){if(o=k(o.times(l),p,1),E((f=u.plus(D(o,new w(i),p,1))).d).slice(0,p)===E(u.d).slice(0,p)){if(u=u.times(2),0!==s&&(u=u.plus(F(w,p+2,v).times(s+""))),u=D(u,new w(g),p,1),null!=n)return w.precision=v,u;if(!M(u.d,p-10,y,a))return k(u,w.precision=v,y,c=!0);w.precision=p+=10,f=o=h=D(d.minus(1),d.plus(1),p,1),l=k(h.times(h),p,1),i=a=1}u=f,i+=2}}function Z(e){return String(e.s*e.s/0)}function I(e,n){var t,r,i;for((t=n.indexOf("."))>-1&&(n=n.replace(".","")),(r=n.search(/e/i))>0?(t<0&&(t=r),t+=+n.slice(r+1),n=n.substring(0,r)):t<0&&(t=n.length),r=0;48===n.charCodeAt(r);r++);for(i=n.length;48===n.charCodeAt(i-1);--i);if(n=n.slice(r,i)){if(i-=r,e.e=t=t-r-1,e.d=[],r=(t+1)%7,t<0&&(r+=7),r<i){for(r&&e.d.push(+n.slice(0,r)),i-=7;r<i;)e.d.push(+n.slice(r,r+=7));r=7-(n=n.slice(r)).length}else r-=i;for(;r--;)n+="0";e.d.push(+n),c&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function U(e,n){var t,r,i,s,o,a,u,p,d;if(n.indexOf("_")>-1){if(n=n.replace(/(\d)_(?=\d)/g,"$1"),v.test(n))return I(e,n)}else if("Infinity"===n||"NaN"===n)return+n||(e.s=NaN),e.e=NaN,e.d=null,e;if(w.test(n))t=16,n=n.toLowerCase();else if(m.test(n))t=2;else{if(!y.test(n))throw Error(f+n);t=8}for((s=n.search(/p/i))>0?(u=+n.slice(s+1),n=n.substring(2,s)):n=n.slice(2),o=(s=n.indexOf("."))>=0,r=e.constructor,o&&(s=(a=(n=n.replace(".","")).length)-s,i=C(r,new r(t),s,2*s)),s=d=(p=T(n,t,x)).length-1;0===p[s];--s)p.pop();return s<0?new r(0*e.s):(e.e=O(p,d),e.d=p,c=!1,o&&(e=D(e,i,4*a)),u&&(e=e.times(Math.abs(u)<54?h(2,u):He.pow(2,u))),c=!0,e)}function L(e,n,t,r,i){var s,o,a,u,f=e.precision,p=Math.ceil(f/7);for(c=!1,u=t.times(t),a=new e(r);;){if(o=D(a.times(u),new e(n++*n++),f,1),a=i?r.plus(o):r.minus(o),r=D(o.times(u),new e(n++*n++),f,1),void 0!==(o=a.plus(r)).d[p]){for(s=p;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=r,r=o,o=s}return c=!0,o.d.length=p+1,o}function B(e,n){for(var t=e;--n;)t*=e;return t}function W(e,t){var r,i=t.s<0,s=P(e,e.precision,1),o=s.times(.5);if((t=t.abs()).lte(o))return n=i?4:1,t;if((r=t.divToInt(s)).isZero())n=i?3:2;else{if((t=t.minus(r.times(s))).lte(o))return n=q(r)?i?2:3:i?4:1,t;n=q(r)?i?1:4:i?3:2}return t.minus(s).abs()}function V(n,t,s,o){var a,c,u,f,p,d,l,g,h,m=n.constructor,w=void 0!==s;if(w?($(s,1,r),void 0===o?o=m.rounding:$(o,0,8)):(s=m.precision,o=m.rounding),n.isFinite()){for(w?(a=2,16==t?s=4*s-3:8==t&&(s=3*s-2)):a=t,(u=(l=Y(n)).indexOf("."))>=0&&(l=l.replace(".",""),(h=new m(1)).e=l.length-u,h.d=T(Y(h),10,a),h.e=h.d.length),c=p=(g=T(l,10,a)).length;0==g[--p];)g.pop();if(g[0]){if(u<0?c--:((n=new m(n)).d=g,n.e=c,g=(n=D(n,h,s,o,0,a)).d,c=n.e,d=e),u=g[s],f=a/2,d=d||void 0!==g[s+1],d=o<4?(void 0!==u||d)&&(0===o||o===(n.s<0?3:2)):u>f||u===f&&(4===o||d||6===o&&1&g[s-1]||o===(n.s<0?8:7)),g.length=s,d)for(;++g[--s]>a-1;)g[s]=0,s||(++c,g.unshift(1));for(p=g.length;!g[p-1];--p);for(u=0,l="";u<p;u++)l+=i.charAt(g[u]);if(w){if(p>1)if(16==t||8==t){for(u=16==t?4:3,--p;p%u;p++)l+="0";for(p=(g=T(l,a,t)).length;!g[p-1];--p);for(u=1,l="1.";u<p;u++)l+=i.charAt(g[u])}else l=l.charAt(0)+"."+l.slice(1);l=l+(c<0?"p":"p+")+c}else if(c<0){for(;++c;)l="0"+l;l="0."+l}else if(++c>p)for(c-=p;c--;)l+="0";else c<p&&(l=l.slice(0,c)+"."+l.slice(c))}else l=w?"0p+0":"0";l=(16==t?"0x":2==t?"0b":8==t?"0o":"")+l}else l=Z(n);return n.s<0?"-"+l:l}function K(e,n){if(e.length>n)return e.length=n,!0}function z(e){return new this(e).abs()}function X(e){return new this(e).acos()}function J(e){return new this(e).acosh()}function G(e,n){return new this(e).plus(n)}function Q(e){return new this(e).asin()}function ee(e){return new this(e).asinh()}function ne(e){return new this(e).atan()}function te(e){return new this(e).atanh()}function re(e,n){e=new this(e),n=new this(n);var t,r=this.precision,i=this.rounding,s=r+4;return e.s&&n.s?e.d||n.d?!n.d||e.isZero()?(t=n.s<0?P(this,r,i):new this(0)).s=e.s:!e.d||n.isZero()?(t=P(this,s,1).times(.5)).s=e.s:n.s<0?(this.precision=s,this.rounding=1,t=this.atan(D(e,n,s,1)),n=P(this,s,1),this.precision=r,this.rounding=i,t=e.s<0?t.minus(n):t.plus(n)):t=this.atan(D(e,n,s,1)):(t=P(this,s,1).times(n.s>0?.25:.75)).s=e.s:t=new this(NaN),t}function ie(e){return new this(e).cbrt()}function se(e){return k(e=new this(e),e.e+1,2)}function oe(e,n,t){return new this(e).clamp(n,t)}function ae(e){if(!e||"object"!=typeof e)throw Error(u+"Object expected");var n,i,s,o=!0===e.defaults,c=["precision",1,r,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,t,"maxE",0,t,"minE",-9e15,0,"modulo",0,9];for(n=0;n<c.length;n+=3)if(i=c[n],o&&(this[i]=a[i]),void 0!==(s=e[i])){if(!(g(s)===s&&s>=c[n+1]&&s<=c[n+2]))throw Error(f+i+": "+s);this[i]=s}if(i="crypto",o&&(this[i]=a[i]),void 0!==(s=e[i])){if(!0!==s&&!1!==s&&0!==s&&1!==s)throw Error(f+i+": "+s);if(s){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(d);this[i]=!0}else this[i]=!1}return this}function ce(e){return new this(e).cos()}function ue(e){return new this(e).cosh()}function fe(e,n){return new this(e).div(n)}function pe(e){return new this(e).exp()}function de(e){return k(e=new this(e),e.e+1,3)}function le(){var e,n,t=new this(0);for(c=!1,e=0;e<arguments.length;)if((n=new this(arguments[e++])).d)t.d&&(t=t.plus(n.times(n)));else{if(n.s)return c=!0,new this(1/0);t=n}return c=!0,t.sqrt()}function ge(e){return e instanceof He||e&&e.toStringTag===l||!1}function he(e){return new this(e).ln()}function me(e,n){return new this(e).log(n)}function we(e){return new this(e).log(2)}function ye(e){return new this(e).log(10)}function ve(){return _(this,arguments,"lt")}function xe(){return _(this,arguments,"gt")}function be(e,n){return new this(e).mod(n)}function Se(e,n){return new this(e).mul(n)}function Ne(e,n){return new this(e).pow(n)}function Ee(e){var n,t,i,s,o=0,a=new this(1),c=[];if(void 0===e?e=this.precision:$(e,1,r),i=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(n=crypto.getRandomValues(new Uint32Array(i));o<i;)(s=n[o])>=429e7?n[o]=crypto.getRandomValues(new Uint32Array(1))[0]:c[o++]=s%1e7;else{if(!crypto.randomBytes)throw Error(d);for(n=crypto.randomBytes(i*=4);o<i;)(s=n[o]+(n[o+1]<<8)+(n[o+2]<<16)+((127&n[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(n,o):(c.push(s%1e7),o+=4);o=i/4}else for(;o<i;)c[o++]=1e7*Math.random()|0;for(e%=7,(i=c[--o])&&e&&(s=h(10,7-e),c[o]=(i/s|0)*s);0===c[o];o--)c.pop();if(o<0)t=0,c=[0];else{for(t=-1;0===c[0];t-=7)c.shift();for(i=1,s=c[0];s>=10;s/=10)i++;i<7&&(t-=7-i)}return a.e=t,a.d=c,a}function $e(e){return k(e=new this(e),e.e+1,this.rounding)}function Me(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Te(e){return new this(e).sin()}function De(e){return new this(e).sinh()}function ke(e){return new this(e).sqrt()}function Ye(e,n){return new this(e).sub(n)}function Oe(){var e=0,n=arguments,t=new this(n[e]);for(c=!1;t.s&&++e<n.length;)t=t.plus(n[e]);return c=!0,k(t,this.precision,this.rounding)}function Fe(e){return new this(e).tan()}function Pe(e){return new this(e).tanh()}function Ae(e){return k(e=new this(e),e.e+1,1)}N[Symbol.for("nodejs.util.inspect.custom")]=N.toString,N[Symbol.toStringTag]="Decimal";var He=N.constructor=function e(n){var t,r,i;function s(e){var n,t,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,ge(e))return i.s=e.s,void(c?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(n=0,t=e;t>=10;t/=10)n++;return void(c?n>s.maxE?(i.e=NaN,i.d=null):n<s.minE?(i.e=0,i.d=[0]):(i.e=n,i.d=[e]):(i.e=n,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):I(i,e.toString())}if("string"!==r)throw Error(f+e);return 45===(t=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===t&&(e=e.slice(1)),i.s=1),v.test(e)?I(i,e):U(i,e)}if(s.prototype=N,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=ae,s.clone=e,s.isDecimal=ge,s.abs=z,s.acos=X,s.acosh=J,s.add=G,s.asin=Q,s.asinh=ee,s.atan=ne,s.atanh=te,s.atan2=re,s.cbrt=ie,s.ceil=se,s.clamp=oe,s.cos=ce,s.cosh=ue,s.div=fe,s.exp=pe,s.floor=de,s.hypot=le,s.ln=he,s.log=me,s.log10=ye,s.log2=we,s.max=ve,s.min=xe,s.mod=be,s.mul=Se,s.pow=Ne,s.random=Ee,s.round=$e,s.sign=Me,s.sin=Te,s.sinh=De,s.sqrt=ke,s.sub=Ye,s.sum=Oe,s.tan=Fe,s.tanh=Pe,s.trunc=Ae,void 0===n&&(n={}),n&&!0!==n.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)n.hasOwnProperty(r=i[t++])||(n[r]=this[r]);return s.config(n),s}(a);s=new He(s),o=new He(o);class Ce{constructor(e,n,t){this.year=e,this.month=n,this.timestamp=t}getYMString(){let e="";return 0!==this.year&&(e+=this.year+"年"),0!==this.month&&(e+=this.month+"月"),""!=e&&(e+="+"),e}toString(){return this.getYMString()+this.timestamp+"ms"}}const qe={pi:He.acos(-1),e:He.exp(1)};function _e(e){return e instanceof He}function Re(e){return function(e){return"number"==typeof e}(e)||function(e){return"bigint"==typeof e}(e)||_e(e)}function je(e){return e instanceof Date&&!isNaN(e)}function Ze(e){return e instanceof Ce}const Ie={convertTypes(e,n="decimal"){if("decimal"===n)return new He(e.toString());if("number"===n)return Number(e.toString());if("bigint"===n)return BigInt(e.toString());if("string"===n)return e.toString();if("any"===n)return e;throw new Error(`无法将 ${e} 转换为 ${n} 类型`)},formatToDisplayString:e=>Ze(e)?{value:e.toString(),info:"时间间隔："+Ie.formatDateStamp(e)}:je(e)?{value:e.getTime(),info:"时间戳对应日期："+Ie.formatDate(e)}:_e(e)?e.isInteger()?e.toString():e.toFixed(16).replace(/\.?0+$/,""):e.toString(),add(e,n){if(_e(e)&&_e(n))return e.plus(n);if("string"==typeof e||"string"==typeof n)return e.toString()+n.toString();if(Ze(e)&&Ze(n))return new Ce(e.year+n.year,e.month+n.month,e.timestamp+n.timestamp);if(je(e)&&Ze(n)){const t=new Date(e);return t.setFullYear(t.getFullYear()+n.year),t.setMonth(t.getMonth()+n.month),t.setMilliseconds(t.getMilliseconds()+n.timestamp),t}if(je(n)&&Ze(e)){const t=new Date(n);return t.setFullYear(t.getFullYear()+e.year),t.setMonth(t.getMonth()+e.month),t.setMilliseconds(t.getMilliseconds()+e.timestamp),t}if(je(e)&&je(n))throw new Error("两个日期类型不能相加");if(Re(e)&&Re(n))return He(e.toString()).plus(He(n.toString()));if(typeof e!=typeof n)throw new Error(`参数类型不一致: ${typeof e} 和 ${typeof n}`);throw new Error("不支持的加法")},subtract(e,n){if(_e(e)&&_e(n))return e.minus(n);if(Ze(e)){if(Ze(n))return new Ce(e.year-n.year,e.month-n.month,e.timestamp-n.timestamp);throw je(n)?new Error("时间戳不能减去日期 "):new Error("不支持的时间戳减法")}if(je(e)){if(Ze(n)){const t=new Date(e);return t.setFullYear(t.getFullYear()-n.year),t.setMonth(t.getMonth()-n.month),t.setMilliseconds(t.getMilliseconds()-n.timestamp),t}if(je(n)){const t=e.getTime()-n.getTime();return new Ce(0,0,t)}throw new Error("不支持的日期减法")}if(Re(e)&&Re(n))return He(e.toString()).minus(He(n.toString()));if(typeof e!=typeof n)throw new Error(`参数类型不一致: ${typeof e} 和 ${typeof n}`);throw new Error("不支持的减法")},multiply(e,n){if(_e(e)&&_e(n))return e.times(n);throw new Error("不支持的乘法")},divide(e,n){if(_e(e)&&_e(n))return e.div(n);throw new Error("不支持的除法")},floorDivide(e,n){if(_e(e)&&_e(n))return e.div(n).floor();throw new Error("不支持的整除")},mod(e,n){if(_e(e)&&_e(n))return e.mod(n);throw new Error("不支持的模运算")},pow(e,n){if(_e(e)&&_e(n))return e.pow(n);throw new Error("不支持的幂运算")},toFixed(e,n){const t=_e(e)?e:new He(e);return t.isInteger()?t.toString():t.toFixed(n).replace(/\.?0+$/,"")},sin:e=>e.abs().floor()>1e10?Math.sin(e.toString()):He.sin(e),cos:e=>e.abs().floor()>1e10?Math.cos(e.toString()):He.cos(e),tan:e=>e.abs().floor()>1e10?Math.tan(e.toString()):He.tan(e),radianToPi(e){const n=(_e(e)?e:new He(e)).div(qe.pi);if(n.isInteger())return n.equals(1)?"π":n.equals(-1)?"-π":`${n}*π`;const t=[2,3,4,6,8,12];for(const e of t){const t=n.toNumber()*e;if(Math.abs(Math.round(t)-t)<1e-8){const n=Math.round(t);return 1===Math.abs(n)?n>0?`π/${e}`:`-π/${e}`:`${n}*π/${e}`}}return`${n.toFixed(6)}*π`},radianToDeg(e){let n=(_e(e)?e:new He(e)).times(180).div(qe.pi);return n=n.mod(360),n.lt(0)&&(n=n.plus(360)),n},dateToTimestamp(e){const n=new Date(e);if(isNaN(n.getTime()))throw new Error(`无法将${e}转成日期`);return n.getTime()},formatDate(e){if(Ze(e))throw new Error('无法将时间间隔转成日期, 请使用"> #"');const n=new Date(e);if(isNaN(n.getTime()))throw new Error(`无法将${e}转成日期`);const t=n.getFullYear(),r=n.getMonth()+1,i=n.getDate(),s=n.getHours(),o=n.getMinutes(),a=n.getSeconds();return 0===s&&0===o&&0===a?`${t}-${r.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}`:`${t}-${r.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")} ${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},formatDateStamp(e){if(!Ze(e))throw new Error('"> #"只能可视化时间间隔类型');const n=e.timestamp,t=Math.abs(n),r=Math.floor(t/1e3%60),i=Math.floor(t/6e4%60),s=Math.floor(t/36e5%24),o=`${n<0?"-":""}${Math.floor(t/864e5)}天 ${s}小时 ${i}分钟 ${r}秒`;return e.getYMString()+o},formatDateStamp2Week(e){if(!Ze(e))throw new Error('"> #w"只能可视化时间间隔类型');const n=(e.timestamp/6048e5).toFixed(2)+"周";return e.getYMString()+n},formatDateStamp2Day(e){if(!Ze(e))throw new Error('"> #d"只能可视化时间间隔类型');const n=(e.timestamp/864e5).toFixed(2)+"天";return e.getYMString()+n},formatDateStamp2Hour(e){if(!Ze(e))throw new Error('"> #h"只能可视化时间间隔类型');const n=(e.timestamp/36e5).toFixed(2)+"小时";return e.getYMString()+n},formatDateStamp2Minute(e){if(!Ze(e))throw new Error('"> #m"只能可视化时间间隔类型');const n=(e.timestamp/6e4).toFixed(2)+"分钟";return e.getYMString()+n},formatDateStamp2Second(e){if(!Ze(e))throw new Error('"> #s"只能可视化时间间隔类型');const n=(e.timestamp/1e3).toFixed(2)+"秒";return e.getYMString()+n}},Ue={"π":qe.pi,PI:qe.pi,pi:qe.pi,e:qe.e,E:qe.e},Le={"(":{description:"左括号"},")":{description:"右括号"}},Be={",":{description:"参数分隔符"}},We={"+":{precedence:2,args:2,func:Ie.add,argTypes:"any",position:"infix",description:"加法"},"-":{precedence:2,args:2,func:Ie.subtract,argTypes:"any",position:"infix",description:"减法"},"*":{precedence:4,args:2,func:Ie.multiply,position:"infix",description:"乘法"},"/":{precedence:4,args:2,func:Ie.divide,position:"infix",description:"除法"},"//":{precedence:4,args:2,func:Ie.floorDivide,position:"infix",description:"整除"},"%":{precedence:4,args:2,func:Ie.mod,position:"infix",description:"取模"},"**":{precedence:7,args:2,func:Ie.pow,position:"infix",description:"幂运算"},"°":{alias:".rad",description:"角度转弧度"},"unary-":{precedence:5,args:1,func:e=>e.neg(),position:"prefix",description:"负号"},"unary+":{precedence:5,args:1,func:e=>e,position:"prefix",description:"正号"},"unary%":{precedence:5,args:1,func:e=>e.times(.01),position:"postfix",preventSelfReference:!0,description:"百分号"},"‰":{precedence:5,args:1,func:e=>e.times(.001),position:"postfix",preventSelfReference:!0,description:"千分号"},"&":{precedence:1,args:2,func:(e,n)=>(console.log(typeof e,typeof n),e&n),position:"infix",argTypes:"bigint",description:"按位与"},and:{alias:"&",description:"按位与"},"|":{precedence:1,args:2,func:(e,n)=>e|n,position:"infix",argTypes:"bigint",description:"按位或"},or:{alias:"|",description:"按位或"},"^":{precedence:1,args:2,func:(e,n)=>e^n,position:"infix",argTypes:"bigint",description:"按位异或"},"~":{precedence:6,args:1,func:e=>~e,position:"prefix",argTypes:"bigint",description:"按位取反"},not:{alias:"~",description:"按位取反"},"<<":{precedence:3,args:2,func:(e,n)=>e<<n,position:"infix",argTypes:"bigint",description:"左移"},">>":{precedence:3,args:2,func:(e,n)=>e>>n,position:"infix",argTypes:"bigint",description:"右移"},">>>":{precedence:3,args:2,func:(e,n)=>e>>>n,position:"infix",argTypes:"number",description:"无符号右移"},"=":{precedence:0,args:2,func:(e,n)=>n,position:"infix",argTypes:"any",isCompoundAssignment:!0,description:"赋值"},"+=":{precedence:0,args:2,func:(e,n)=>e.add(n),position:"infix",description:"加法赋值",isCompoundAssignment:!0},"-=":{precedence:0,args:2,func:(e,n)=>e.sub(n),position:"infix",description:"减法赋值",isCompoundAssignment:!0},"*=":{precedence:0,args:2,func:(e,n)=>e.mul(n),position:"infix",description:"乘法赋值",isCompoundAssignment:!0},"/=":{precedence:0,args:2,func:(e,n)=>e.div(n),position:"infix",description:"除法赋值",isCompoundAssignment:!0},"&=":{precedence:0,args:2,func:(e,n)=>e&n,position:"infix",argTypes:"bigint",description:"按位与赋值",isCompoundAssignment:!0},"|=":{precedence:0,args:2,func:(e,n)=>(console.log("|=",e,n),console.log("oldValue的类型:",typeof e),console.log("rightValue的类型:",typeof n),e|n),position:"infix",argTypes:"bigint",description:"按位或赋值",isCompoundAssignment:!0},"^=":{precedence:0,args:2,func:(e,n)=>e^n,position:"infix",argTypes:"bigint",description:"按位异或赋值",isCompoundAssignment:!0},"<<=":{precedence:0,args:2,func:(e,n)=>e<<n,position:"infix",argTypes:"bigint",description:"左移赋值",isCompoundAssignment:!0},">>=":{precedence:0,args:2,func:(e,n)=>e>>n,position:"infix",argTypes:"bigint",description:"右移赋值",isCompoundAssignment:!0},">>>=":{precedence:0,args:2,func:(e,n)=>e>>>n,position:"infix",argTypes:"number",description:"无符号右移赋值",isCompoundAssignment:!0},"@":{precedence:1,args:1,func:Ie.dateToTimestamp,position:"prefix",argTypes:"any",description:"日期转时间戳"},">@":{precedence:0,args:1,func:Ie.formatDate,position:"postfix",argTypes:"any",description:"时间戳可视化成日期"},">#":{precedence:0,args:1,func:Ie.formatDateStamp,position:"postfix",argTypes:"any",description:"时间差可视化"},">#w":{precedence:0,args:1,func:Ie.formatDateStamp2Week,position:"postfix",argTypes:"any",description:"时间差转成周数"},">#W":{alias:">#w",description:"时间差转成周数"},">#d":{precedence:0,args:1,func:Ie.formatDateStamp2Day,position:"postfix",argTypes:"any",description:"时间差转成天数"},">#D":{alias:">#d",description:"时间差转成天数"},">#h":{precedence:0,args:1,func:Ie.formatDateStamp2Hour,position:"postfix",argTypes:"any",description:"时间差转成小时数"},">#H":{alias:">#h",description:"时间差转成小时数"},">#m":{precedence:0,args:1,func:Ie.formatDateStamp2Minute,position:"postfix",argTypes:"any",description:"时间差转成分钟数"},">#M":{alias:">#m",description:"时间差转成分钟数"},">#s":{precedence:0,args:1,func:Ie.formatDateStamp2Second,position:"postfix",argTypes:"any",description:"时间差转成秒数"},">#S":{alias:">#s",description:"时间差转成秒数"}},Ve={str:{func:e=>e.toString(),args:1,argTypes:"any",description:"转换为字符串"},num:{func:e=>e,args:1,description:"转换为数字"},max:{func:(...e)=>He.max(...e),args:-1,description:"求最大值"},min:{func:(...e)=>He.min(...e),args:-1,description:"求最小值"},lg:{func:e=>He.log10(e),args:1,description:"以10为底的对数"},lb:{func:e=>He.log2(e),args:1,description:"以2为底的对数"},log:{func:(e,n)=>He.log(n,e),args:2,description:"以x为底的y对数"},ln:{func:e=>He.ln(e),args:1,description:"自然对数"},exp:{func:e=>He.exp(e),args:1,description:"e的指数"},sin:{func:Ie.sin,args:1,description:"正弦函数"},cos:{func:Ie.cos,args:1,description:"余弦函数"},tan:{func:Ie.tan,args:1,description:"正切函数"},asin:{func:e=>He.asin(e),args:1,repr:e=>"弧度: "+Ie.radianToPi(e)+" | 角度: "+Ie.toFixed(Ie.radianToDeg(e),3)+"°",description:"反正弦函数"},acos:{func:e=>He.acos(e),args:1,repr:e=>"弧度: "+Ie.radianToPi(e)+" | 角度: "+Ie.toFixed(Ie.radianToDeg(e),3)+"°",description:"反余弦函数"},atan:{func:e=>He.atan(e),args:1,repr:e=>"弧度: "+Ie.radianToPi(e)+" | 角度: "+Ie.toFixed(Ie.radianToDeg(e),3)+"°",description:"反正切函数"},sinh:{func:e=>He.sinh(e),args:1,description:"双曲正弦"},cosh:{func:e=>He.cosh(e),args:1,description:"双曲余弦"},tanh:{func:e=>He.tanh(e),args:1,description:"双曲正切"},sqrt:{func:e=>e.sqrt(),args:1,description:"平方根"},pow:{func:Ie.pow,args:2,description:"幂函数"},abs:{args:1,func:e=>e.abs(),asProperty:!0,description:"绝对值"},rad:{args:1,func:e=>e.times(qe.pi).div(180),asProperty:!0,preventSelfReference:!0,repr:e=>"弧度: "+Ie.radianToPi(e)+" | 角度: "+Ie.toFixed(Ie.radianToDeg(e),3)+"°",description:"度数转换为弧度"},deg:{args:1,func:Ie.radianToDeg,asProperty:!0,preventSelfReference:!0,repr:e=>"角度: "+Ie.toFixed(e,3)+"°",description:"弧度转换为度数"},upper:{args:1,func:e=>e.toUpperCase(),argTypes:"any",asProperty:!0,description:"转换为大写"},lower:{args:1,func:e=>e.toLowerCase(),argTypes:"any",asProperty:!0,description:"转换为小写"},length:{args:1,func:e=>e.length,argTypes:"any",asProperty:!0,description:"字符串长度"},bin:{args:1,func:e=>"0b"+e.toString(2),asProperty:!0,argTypes:"bigint",description:"十进制转二进制"},oct:{args:1,func:e=>"0o"+e.toString(8),asProperty:!0,argTypes:"bigint",description:"十进制转八进制"},hex:{args:1,func:e=>"0x"+e.toString(16),asProperty:!0,argTypes:"bigint",description:"十进制转十六进制"},base64:{args:1,func:e=>{try{return"string"!=typeof e&&(e=String(e)),btoa(e)}catch(e){throw new Error("Base64编码失败: "+e.message)}},description:"Base64编码",argTypes:"any",asProperty:!0},unbase64:{args:1,func:e=>{try{return"string"!=typeof e&&(e=String(e)),atob(e)}catch(e){throw new Error("Base64解码失败: "+e.message)}},description:"Base64解码",argTypes:"any",asProperty:!0},timestamp:{args:8,func:(e=0,n=0,t=0,r=0,i=0,s=0,o=0,a=0)=>{const c=Number(e),u=Number(n);if(!Number.isInteger(c)||!Number.isInteger(u))throw new Error(`年:${c} 月:${u} 必须是整数`);return new Ce(c,u,1e3*(60*(60*(24*(7*t+r)+i)+s)+o)+a)},argTypes:"number",description:"时间间隔转换为时间戳"}},Ke=new Map;function ze(e,n){const t=new Date;let r;switch(n){case"now":r=t;break;case"today":r=new Date(t.getFullYear(),t.getMonth(),t.getDate());break;case"YYYY-MM-DD HH:mm:ss":r=new Date(e);break;case"YYYY-MM-DD HH:mm":r=new Date(e+":00");break;case"YYYY-MM-DD":r=new Date(e+"T00:00:00");break;case"MM-DD HH:mm:ss":e=e.replace(/^(\d{1,2})-(\d{1,2})/,((e,n,t)=>`${n.padStart(2,"0")}-${t.padStart(2,"0")}`)),r=new Date(t.getFullYear()+"-"+e);break;case"MM-DD HH:mm":e=e.replace(/^(\d{1,2})-(\d{1,2})/,((e,n,t)=>`${n.padStart(2,"0")}-${t.padStart(2,"0")}`)),r=new Date(t.getFullYear()+"-"+e+":00");break;case"YYYY-MM":r=new Date(e+"-01T00:00:00");break;case"MM-DD":e=e.replace(/(\d{1,2})-(\d{1,2})/,((e,n,t)=>`${n.padStart(2,"0")}-${t.padStart(2,"0")}`)),r=new Date(t.getFullYear()+"-"+e+"T00:00:00");break;case"YYYY":r=new Date(e+"-01-01T00:00:00");break;case"HH:mm:ss":{const[n,t,i]=e.split(":").map(Number);return r=new Date(0),r.setUTCHours(n,t,i),new Ce(0,0,r.getTime())}case"HH:mm":{const[n,t]=e.split(":").map(Number);return r=new Date(0),r.setUTCHours(n,t,0),new Ce(0,0,r.getTime())}default:return null}return isNaN(r.getTime())?null:r}const Xe=function(){const e=100,n=new Map,t=[],r=[];function i(e){t.includes(e)||t.push(e)}function s(e){r.includes(e)||r.push(e)}function o(){t.length=0,r.length=0}function a(t,r,s,o){const a=function(e){const n={"（":"(","）":")","，":",","”":'"',"’":"'","【":"[","】":"]","《":"<","》":">","＋":"+","－":"-","＝":"=","÷":"/","。":".","［":"[","］":"]","｛":"{","｝":"}","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","０":"0"},t=new RegExp(Object.keys(n).join("|"),"g");return e.replace(t,(e=>n[e]||e))}(t);a!==t&&i(`格式化: "${a}"`),t=a,Ke.clear(),t=(t=function(e){let n=0,t=e.replace(/str\s*\(((?:[^)(]|\([^)(]*\))*)\)/g,((e,t)=>{const r="_cc_str_i"+n++;return Ke.set(r,t.trim()),r}));if(t=t.replace(/(['"`])((?:\\.|[^\\])*?)\1/g,((e,t,r)=>{const i="_cc_str_i"+n++,s=r.replace(/\\(['"\\`])/g,"$1");return Ke.set(i,s),i})),/['"`][^'"`]*$/.test(t))throw new Error("未闭合的字符串字面量");return t}(t=function(e){function n(e){const n=["years?","y","months?","m","weeks?","w","days?","d","hours?","h","minutes?","mm","seconds?","s","milliseconds?","ms"].join("|"),t=new RegExp(`([+-]?\\d+\\.?\\d*)(${n})`,"gi");return e.replace(t,"($1)$2")}function t(e){if(""===e.trim())return e;const n={years:["y","year","years"],months:["m","month","months"],weeks:["w","week","weeks"],days:["d","day","days"],hours:["h","hour","hours"],minutes:["mm","minute","minutes"],seconds:["s","second","seconds"],milliseconds:["ms","millisecond","milliseconds"]},t="START",r="EXPECT_OPEN",i="IN_BRACKETS",s="EXPECT_UNIT",o="END";let a=t,c=0,u="",f=0,p={years:"0",months:"0",weeks:"0",days:"0",hours:"0",minutes:"0",seconds:"0",milliseconds:"0"},d=Object.keys(n),l=0;const g={y:["years","year","y"],m:["milliseconds","millisecond","minutes","months","minute","month","mins","min","mm","ms","m"],w:["weeks","week","w"],d:["days","day","d"],h:["hours","hour","h"],s:["seconds","second","s"]};for(;c<e.length&&a!==o;){const h=e[c];switch(a){case t:if("("===h)a=i,f=1,u="";else if(h.trim())throw g[h]?new Error(`时间单位:${e.slice(c,c+5)+"..."} 没有值`):new Error("时间值必须在括号内");break;case r:"("===h?(a=i,f=1,u=""):h.trim()&&"+"!==h&&"-"!==h&&(0===l&&(l=c),a=o);break;case i:if("("===h)f++,u+=h;else if(")"===h)if(f--,0===f){if(!u.trim())throw new Error("括号内不能为空");a=s}else u+=h;else u+=h;break;case s:let m=c,w={length:0,unitKey:"",value:u,endPos:c};const y=e[c].toLowerCase();if(g[y]){const t=g[y];for(const r of t)if(e.slice(c,c+r.length).toLowerCase()===r){let e;for(const[t,i]of Object.entries(n))if(i.includes(r)){if("0"!==p[t])throw new Error(`时间单位:${t} 重复赋值`);e=t;break}if(e){w={length:r.length,unitKey:e,value:u,endPos:c+r.length-1},c+=r.length-1;break}}}w.length>0?(p[w.unitKey]=w.value,c=w.endPos,l=c+1,d.indexOf(w.unitKey),a=r):(c=m,a=r)}c++}let h=`timestamp(${[p.years||"0",p.months||"0",p.weeks||"0",p.days||"0",p.hours||"0",p.minutes||"0",p.seconds||"0",p.milliseconds||"0"].join(", ")})`;if(l<e.length){const n=e.substring(l).trim();n&&(h+=" "+n)}return h}const r=(e=e.replace(/>\s*#/g,">timestamp")).split("#");let i=r[0];for(let e=1;e<r.length;e++)i+=t(n(r[e]));return i=i.replace(/>timestamp/g,">#"),i}(t=function(e){let n=0;const t=[{regex:/(@)\s*(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})/,format:"YYYY-MM-DD HH:mm:ss",extract:e=>`${e[2]}-${e[3].padStart(2,"0")}-${e[4].padStart(2,"0")} ${e[5]}:${e[6]}:${e[7]}`},{regex:/(@)\s*(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2})/,format:"YYYY-MM-DD HH:mm",extract:e=>`${e[2]}-${e[3].padStart(2,"0")}-${e[4].padStart(2,"0")} ${e[5]}:${e[6]}`},{regex:/(@)\s*(\d{4})-(\d{1,2})-(\d{1,2})/,format:"YYYY-MM-DD",extract:e=>`${e[2]}-${e[3].padStart(2,"0")}-${e[4].padStart(2,"0")}`},{regex:/(@)\s*(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})/,format:"MM-DD HH:mm:ss",extract:e=>`${e[2].padStart(2,"0")}-${e[3].padStart(2,"0")} ${e[4]}:${e[5]}:${e[6]}`},{regex:/(@)\s*(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2})/,format:"MM-DD HH:mm",extract:e=>`${e[2].padStart(2,"0")}-${e[3].padStart(2,"0")} ${e[4]}:${e[5]}`},{regex:/(@)\s*(\d{4})-(\d{1,2})/,format:"YYYY-MM",extract:e=>`${e[2]}-${e[3].padStart(2,"0")}`},{regex:/(#)\s*(\d{1,2}):(\d{1,2}):(\d{1,2})/,format:"HH:mm:ss",extract:e=>`${e[2].padStart(2,"0")}:${e[3].padStart(2,"0")}:${e[4].padStart(2,"0")}`},{regex:/(#)\s*(\d{1,2}):(\d{1,2})/,format:"HH:mm",extract:e=>`${e[2].padStart(2,"0")}:${e[3].padStart(2,"0")}`},{regex:/(@)\s*(\d{1,2})-(\d{1,2})/,format:"MM-DD",extract:e=>`${e[2].padStart(2,"0")}-${e[3].padStart(2,"0")}`},{regex:/(@)\s*(\d{4})/,format:"YYYY",extract:e=>e[2]},{regex:/(@)\s*(now)/,format:"now",extract:e=>e[2]},{regex:/(@)\s*(today)/,format:"today",extract:e=>e[2]}];let r;do{r=e;for(const{regex:r,format:i,extract:s}of t){const t=r.exec(e);if(t){const r=ze(s(t),i);if(r){const i="_cc_date_i"+n++;Ke.set(i,r),e=e.substring(0,t.index)+i+e.substring(t.index+t[0].length);break}}}}while(e!==r);return e}(t)))).replace(/\s/g,"");for(const[e,t]of Ke)n.set(e,t);!function(e,n=1e3){const t=e.replace(/'[^']*'|"[^"]*"/g,""),r=[];let i=0;for(let e=0;e<t.length;e++)if("("===t[e]){if(r.push(e),i=Math.max(i,r.length),i>n)throw new Error("括号嵌套深度过大")}else if(")"===t[e]){if(0===r.length)throw new Error(`多余的右括号，位置: ${e}`);const n=r.pop();if(e-n>1e3)throw new Error(`括号内容过长，开始位置: ${n}`)}if(r.length>0){const e=r.join(", ");throw new Error(`缺少右括号，对应左括号位置: ${e}`)}const s=[{pattern:/\)[\w\d]/,message:"右括号后直接跟标识符"},{pattern:/\)\(/,message:"右括号后直接跟左括号"},{pattern:/,\s*\)/,message:"逗号后直接跟右括号"},{pattern:/\(\s*,/,message:"左括号后直接跟逗号"},{pattern:/\(\s*\)(?!\s*[.,)\]}])/,message:"独立的空括号对"}];for(const{pattern:e,message:n}of s)if(e.test(t))throw new Error(`括号使用错误: ${n}`)}(t,e);for(const[e,n]of Object.entries(Ve))n.asProperty&&(r.add("."+e),We["."+e]={precedence:8,args:1,func:n.func,position:"postfix",...n.argTypes&&{argTypes:n.argTypes},...n.repr&&{repr:n.repr},...n.preventSelfReference&&{preventSelfReference:n.preventSelfReference}});return{expr:t,operators:new Set([...r].sort(((e,n)=>n.length-e.length)))}}function c(e,t,r,s){function o(){if(0===c.length)return!0;const[e,n]=c[c.length-1];return"%"!==n&&"‰"!==n&&!("string"===e||"constant"===e||"delimiter"===e&&")"===n||"function"===e||"identifier"===e||"operator"===e&&n.startsWith("."))}function a(){let n="";for(;u<e.length;){const t=e[u],i=n+t;if("0"===n&&("x"===t||"b"===t||"o"===t)){n+=t,u++;continue}if(/^\d+\.?\d*$/.test(n)&&("e"===t||"E"===t)){for(n+=t,u++,u<e.length&&("+"===e[u]||"-"===e[u])&&(n+=e[u],u++);u<e.length&&/\d/.test(e[u]);)n+=e[u],u++;continue}if(f.has(t)||p.has(t))break;const o=d.some((n=>e.startsWith(n,u))),a=[...r,...s].some((e=>e.startsWith(i)));if(o&&!a)break;n+=t,u++}return n}const c=[];let u=0;const f=new Set(Object.keys(Le)),p=new Set(Object.keys(Be)),d=[...t].sort(((e,n)=>n.length-e.length));for(;u<e.length;){const n=e[u],t=e.slice(u);let i=!1;for(const e of d)if(t.startsWith(e)){("="===e||We[e].isCompoundAssignment)&&c.length>0&&"string"===c[c.length-1][0]&&(c[c.length-1][0]="identifier"),"+"===e?o()?c.push(["operator","unary+"]):c.push(["operator","+"]):"-"===e?o()?c.push(["operator","unary-"]):c.push(["operator","-"]):"%"===e?c.push(["operator","%"]):p.has(e)?c.push(["separator",e]):f.has(e)?c.push(["delimiter",e]):We[e]&&We[e].alias?c.push(["operator",We[e].alias]):c.push(["operator",e]),u+=e.length,i=!0;break}if(!i)if(p.has(n))c.push(["separator",n]),u++;else if(f.has(n))c.push(["delimiter",n]),u++;else{const e=a();e&&(r.has(e)?Ve[e]&&Ve[e].alias?c.push(["function",Ve[e].alias]):c.push(["function",e]):s.has(e)?c.push(["constant",e]):c.push(["string",e]))}}const l=function(e){if(!e.some((e=>("identifier"===e[0]||"string"===e[0])&&"x"===e[1]))&&!n.has("x"))for(let t=0;t<e.length;t++)if("string"===e[t][0]){if(e[t][1].startsWith("0x"))continue;if(n.has(e[t][1]))continue;const r=e[t][1].split("x");if(r.length>1){const n=[];for(let e=0;e<r.length;e++)r[e]&&(s.has(r[e])?n.push(["constant",r[e]]):n.push(["string",r[e]])),e<r.length-1&&(n.push(["operator","*"]),i("使用x作为乘法符号"));e.splice(t,1,...n),t+=n.length-1}}return e}(c);return l}function u(n,t,r){let i=0,s=0;const o=n.filter((e=>{const[n]=e;return"delimiter"!==n&&"separator"!==n})).length;let a=0;function c(){if(s>e)throw new Error("表达式嵌套深度过大，可能存在无限递归")}function u(e,n,t){return a++,{value:e,args:n,type:t}}function f(){if(i>=n.length)throw new Error("意外的表达式结束");const[e,t]=n[i];switch(i++,e){case"function":return function(e){p("(");const t=[];for(;i<n.length&&("delimiter"!==n[i][0]||")"!==n[i][1]);)t.push(d(0)),"separator"===n[i][0]&&i++;return p(")"),u(e,t,"function")}(t);case"constant":case"identifier":case"string":return u(t,[],e);case"delimiter":if("("===t){const e=d(0);return p(")"),e}throw new Error(`意外的定界符: ${t}`);default:throw new Error(`意外的token类型: ${e}`)}}function p(e){if(i>=n.length||"delimiter"!==n[i][0]||n[i][1]!==e)throw new Error(`期望定界符 "${e}"`);i++}function d(e=0){s++,c();let t=function(){if(s++,c(),i>=n.length)throw new Error("意外的表达式结束");const[e,t]=n[i];if("operator"===e&&We[t]&&"prefix"===We[t].position){i++;const e=d(We[t].precedence);return s--,u(t,[e],"operator")}return s--,f()}(e);for(;i<n.length;){const[r,s]=n[i];if("operator"===r&&"%"===s){const e=n[i+1],r=e&&("string"===e[0]||"constant"===e[0]||"function"===e[0]||"delimiter"===e[0]&&"("===e[1]);if(i++,r){t=u("%",[t,d(We["%"].precedence+1)],"operator")}else t=u("unary%",[t],"operator");continue}if("operator"===r&&We[s]&&"postfix"===We[s].position){if(We[s].precedence<e)break;i++,t=u(s,[t],"operator");continue}if("operator"!==r||!We[s]||We[s].precedence<e||"infix"!==We[s].position)break;i++;const o=We[s];t=u(s,[t,d(o.isCompoundAssignment?o.precedence:o.precedence+1)],"operator")}return s--,t}const l=d();if(a<o)throw new Error(`解析错误：AST节点不全(${a} < ${o})`);return function n(t,r=0){if(r>e)throw new Error("自引用检查嵌套深度过大，可能存在无限递归");if("function"===t.type){const e=t.value;if(Ve[e]&&Ve[e].preventSelfReference&&t.args.some((n=>"function"===n.type&&n.value===e)))throw new Error(`函数 ${e} 不能直接作用在自己身上`)}else if("operator"===t.type){const e=t.value;if(We[e]&&We[e].preventSelfReference&&t.args.some((n=>"operator"===n.type&&n.value===e)))throw new Error(`运算符 ${e} 不能直接作用在自己身上`)}t.args?.forEach((e=>n(e,r+1)))}(l),l}function f(e,n){return n?e.map((e=>Ie.convertTypes(e,n))):e.map((e=>Ie.convertTypes(e)))}function p(t,r,o,a,c=0){if(c>e)throw new Error("表达式求值嵌套深度过大，可能存在无限递归");if(!t)return 0;if("string"===t.type)return n.has(t.value)?n.get(t.value):Ie.convertTypes(t.value);if("identifier"===t.type)return n.has(t.value)?n.get(t.value):t.value;if("constant"===t.type)return Ue[t.value];const u=t.args.map((e=>p(e,r,o,a,c+1)));if("operator"===t.type){const e=We[t.value];if(void 0!==e.args&&u.length!==e.args)throw new Error(`运算符 "${t.value}" 需要 ${e.args} 个参数，但得到了 ${u.length} 个`);if(e.isCompoundAssignment){const[u,d]=t.args;if("identifier"!==u.type&&"string"!==u.type)throw new Error("赋值运算符左侧必须是变量名");!function(e,n,t,r){if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)){if(/\s/.test(e))throw new Error(`变量名 "${e}" 不能包含空格`);throw new Error(`变量名 "${e}" 格式不正确，只能包含字母、数字和下划线，且不以数字开头`)}if(e.startsWith("_cc_"))throw new Error('变量名不能以 "_cc_" 开头，这是系统保留的前缀');if(n.hasOwnProperty(e))throw new Error(`变量名 "${e}" 与运算符冲突`);if(t.hasOwnProperty(e))throw new Error(`变量名 "${e}" 与函数名冲突`);if(r.hasOwnProperty(e))throw new Error(`变量名 "${e}" 与常量冲突`);if(["if","else","true","false","null","undefined"].includes(e))throw new Error(`变量名 "${e}" 是保留字`)}(u.value,r,o,a);const l=p(d,r,o,a,c+1);if("="===t.value)return n.set(u.value,l),s(`添加变量 ${u.value}: ${l}`),"x"===u.value&&i("将无法使用x做为乘法符号"),l;{if(!n.has(u.value))throw new Error(`变量 "${u.value}" 未定义`);const t=f([n.get(u.value),l],e.argTypes),r=e.func(...t);return n.set(u.value,r),r}}const d=f(u,e.argTypes);return e.func(...d)}if("function"===t.type){const e=Ve[t.value];if(void 0!==e.args)if(-1===e.args){if(0===u.length)throw new Error(`函数 "${t.value}" 至少需要1个参数`)}else if(u.length!==e.args)throw new Error(`函数 "${t.value}" 需要 ${e.args} 个参数，但得到了 ${u.length} 个`);const n=f(u,e.argTypes);return e.func(...n)}throw new Error(`未处理的节点类型: ${t.type}`)}return{calculate(e){o();const n=new Set(Object.keys(We)),f=new Set(Object.keys(Ve)),d=new Set(Object.keys(Ue)),{expr:l,operators:g}=a(e,n),h=u(c(l,g,f,d)),m=function(e,n){if("object"==typeof(e=Ie.formatToDisplayString(e))&&null!==e&&(e.info&&s(e.info),e.warning&&i(e.warning),e=e.value),!n)return{value:e,info:r.length>0?r:null,warning:t.length>0?t:null};try{let i,o=n;if("operator"===o.type&&"="===o.value&&(o=o.args[1]),"function"===o.type&&Ve[o.value]?i=Ve[o.value].repr:"operator"===o.type&&We[o.value]&&(i=We[o.value].repr),"function"==typeof i)try{const n=i(e);void 0!==n&&s(n)}catch(e){throw new Error(`${e.message}`)}return{value:e,info:r.length>0?r:null,warning:t.length>0?t:null}}catch(n){return i(`格式化输出时发生错误: ${n.message}`),{value:e,info:r.length>0?r:null,warning:t.length>0?t:null}}}(p(h,n,f,d),h);return m},getASTNode(e){const n=new Set(Object.keys(We)),t=new Set(Object.keys(Ve)),r=new Set(Object.keys(Ue)),{expr:i,operators:s}=a(e,n);return u(c(i,s,t,r))},getCfg:()=>({operators:new Set(Object.keys(We)),functions:new Set(Object.keys(Ve)),constants:new Set(Object.keys(Ue))}),tokenize:(e,n,t,r)=>c(e,n,t,r),preprocess:(e,n,t,r)=>a(e,n),getAllVariables:()=>Object.fromEntries(n),clearAllCache(){n.clear(),o()}}}();export{Ue as CONSTANTS,Xe as Calculator,Ve as FUNCTIONS,We as OPERATORS};
